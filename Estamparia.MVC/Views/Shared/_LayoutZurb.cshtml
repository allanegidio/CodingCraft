@using Estamparia.MVC.ViewModels

<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewBag.Title</title>
    @Styles.Render("~/foundation/css")
</head>
<body>
    <div class="title-bar" data-responsive-toggle="nav-menu" data-hide-for="medium">
        <button class="menu-icon" type="button" data-toggle="nav-menu"></button>
        <div class="title-bar-title">Estamparia</div>
    </div>

    <div class="top-bar" id="nav-menu">
        <div class="top-bar-left">
            <ul class="dropdown vertical medium-horizontal menu" data-dropdown-menu>
                <li class="menu-text">Estamparia</li>
                <li>@Html.ActionLink("Categorias", "Indice", "Categorias")</li>
                <li>@Html.ActionLink("Produtos", "Indice", "Produtos")</li>
            </ul>
        </div>
        @Html.Partial("_LayoutHandler", new LayoutViewModel())
    </div>
    <br />
    <div class="grid-container">
        @RenderBody()
    </div>
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/foundation/js")
    @RenderSection("scripts", required: false)
    <script>
        $(document).foundation();
        
        $().ready(function () {
            if (localStorage.getItem('currentLayout'))
                $('#LayoutName').val(localStorage.currentLayout);
        });

        $("#LayoutName").change(function (e) {
            var layouts = document.getElementById("LayoutName");
            var currentLayout = layouts.selectedIndex;
            var layoutName = layouts.options[currentLayout].text;

            localStorage.setItem('currentLayout', currentLayout);

            document.cookie = `LayoutName = ${layoutName}`;
            
            window.location.reload();
        });        
    </script>
</body>
</html>
